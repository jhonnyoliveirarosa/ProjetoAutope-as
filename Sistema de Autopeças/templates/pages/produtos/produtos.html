{% extends 'base.html' %}
{% set css = 'forms.css' %}

{% block title %}Produtos{% endblock %}

{% block content %}
<section class="page-header">
  <h1>üì¶ Cadastro de Produtos</h1>
  <p class="muted">Gerencie e consulte todos os produtos cadastrados</p>
</section>

<div class="grid-container">
  <!-- === Formul√°rio de Cadastro === -->
  <div class="card">
    <h2>üìù Novo Produto</h2>
    <form method="POST" class="form-grid form-produto">
      <div class="form-group">
        <label for="codigo">C√≥digo</label>
        <input type="text" name="codigo" id="codigo" required>
      </div>

      <div class="form-group">
        <label for="descricao">Descri√ß√£o</label>
        <input type="text" name="descricao" id="descricao" required>
      </div>

      <div class="form-group">
        <label for="marca">Marca</label>
        <input type="text" name="marca" id="marca">
      </div>

      <div class="form-group">
        <label for="aplicacao">Aplica√ß√£o</label>
        <input type="text" name="aplicacao" id="aplicacao">
      </div>

      <div class="form-group">
        <label for="preco_compra">Pre√ßo de Compra</label>
        <input type="number" name="preco_compra" id="preco_compra" step="0.01" required>
      </div>

      <div class="form-group">
        <label for="preco_venda">Pre√ßo de Venda</label>
        <input type="number" name="preco_venda" id="preco_venda" step="0.01" required>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary">üíæ Salvar</button>
      </div>
    </form>
  </div>

  <!-- === Tabela de Produtos === -->
  <div class="card">
    <h2>üìã Produtos Cadastrados</h2>
    <table class="data-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>C√≥digo</th>
          <th>Descri√ß√£o</th>
          <th>Marca</th>
          <th>Aplica√ß√£o</th>
          <th>Pre√ßo Compra</th>
          <th>Pre√ßo Venda</th>
          <th>Estoque</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        {% for p in produtos %}
        <tr>
          <td>{{ p.id }}</td>
          <td>{{ p.codigo }}</td>
          <td>{{ p.descricao }}</td>
          <td>{{ p.marca }}</td>
          <td>{{ p.aplicacao }}</td>
          <td>R$ {{ "%.2f"|format(p.preco_compra) }}</td>
          <td>R$ {{ "%.2f"|format(p.preco_venda) }}</td>
          <td>{{ p.estoque_atual }}</td>
          <td>
            <a href="{{ url_for('editar', id=p.id) }}" class="btn-action edit">‚úèÔ∏è Editar</a>
            <a href="{{ url_for('excluir', id=p.id) }}" class="btn-action delete"
              onclick="return confirm('Excluir este produto?')">üóëÔ∏è Excluir</a>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="9" style="text-align:center; color:#94a3b8;">Nenhum produto cadastrado.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}